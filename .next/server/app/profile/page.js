(()=>{var e={};e.id=4178,e.ids=[4178],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},92048:e=>{"use strict";e.exports=require("fs")},76162:e=>{"use strict";e.exports=require("stream")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},11578:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>n}),r(44591),r(36852),r(50857);var t=r(23191),s=r(88716),d=r(37922),i=r.n(d),l=r(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(a,o);let n=["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,44591)),"C:\\Users\\bruno\\Documents\\GitHub\\Divvy\\app\\profile\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,36852)),"C:\\Users\\bruno\\Documents\\GitHub\\Divvy\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,50857)),"C:\\Users\\bruno\\Documents\\GitHub\\Divvy\\app\\not-found.tsx"]}],c=["C:\\Users\\bruno\\Documents\\GitHub\\Divvy\\app\\profile\\page.tsx"],x="/profile/page",u={require:r,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},93262:(e,a,r)=>{Promise.resolve().then(r.bind(r,19861))},19861:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>L});var t=r(10326),s=r(17577),d=r(98965),i=r(35442),l=r(10732),o=r(3679),n=r(84231),c=r(79635),x=r(75290),u=r(76557);let m=(0,u.Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var h=r(98091),g=r(40381);function p(){let{user:e}=(0,l.a)(),[a,r]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),[p,b]=(0,s.useState)(null),[f,y]=(0,s.useState)(!1),[j,v]=(0,s.useState)(!1),k=(0,s.useRef)(null),N=async a=>{try{if(v(!0),!a.target.files||0===a.target.files.length||!e)return;let r=a.target.files[0],t=r.name.split(".").pop(),s=`avatars/${e.id}-${Date.now()}.${t}`,{error:d}=await i.O.storage.from("avatars").upload(s,r,{upsert:!0});if(d)throw d;let{data:{publicUrl:l}}=i.O.storage.from("avatars").getPublicUrl(s),{error:o}=await i.O.from("userprofiles").update({avatarurl:l,updatedat:new Date().toISOString()}).eq("id",e.id);if(o)throw o;b(l),g.ZP.success("Foto de perfil atualizada!")}catch(e){console.error(e),g.ZP.error("Erro ao fazer upload: "+e.message)}finally{v(!1),k.current&&(k.current.value="")}},w=async()=>{if(e&&confirm("Remover foto de perfil?")){v(!0);try{let{error:a}=await i.O.from("userprofiles").update({avatarurl:null}).eq("id",e.id);if(a)throw a;b(null),g.ZP.success("Foto removida.")}catch(e){g.ZP.error("Erro: "+e.message)}finally{v(!1)}}},C=async r=>{if(r.preventDefault(),e){y(!0);try{let{error:r}=await i.O.from("userprofiles").upsert({id:e.id,email:e.email,fullname:a,displayname:a,updatedat:new Date().toISOString()},{onConflict:"id"});if(r)throw r;g.ZP.success("Perfil atualizado!")}catch(e){g.ZP.error("Erro: "+e.message)}finally{y(!1)}}};return(0,t.jsxs)("div",{className:"bg-white dark:bg-dark-900 rounded-xl shadow-sm border border-gray-100 dark:border-dark-800 p-6 md:p-8",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[t.jsx(c.Z,{size:24,className:"text-brand-600"}),"Dados Pessoais"]}),(0,t.jsxs)("div",{className:"flex flex-col items-center mb-8",children:[(0,t.jsxs)("div",{className:"relative group",children:[t.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-white dark:border-dark-800 shadow-lg bg-brand-50 dark:bg-brand-900/20 flex items-center justify-center",children:j?t.jsx(x.Z,{className:"animate-spin text-brand-500 w-10 h-10"}):p?t.jsx("img",{src:p,alt:"Avatar",className:"w-full h-full object-cover"}):t.jsx("span",{className:"text-4xl text-brand-300 font-bold",children:a?a.charAt(0).toUpperCase():e?.email?.charAt(0).toUpperCase()})}),(0,t.jsxs)("div",{className:"absolute bottom-0 right-0 flex gap-2",children:[(0,t.jsxs)("label",{className:"p-2 bg-brand-600 text-white rounded-full cursor-pointer hover:bg-brand-700 shadow-md transition-all hover:scale-105",title:"Alterar foto",children:[t.jsx(m,{size:18}),t.jsx("input",{type:"file",ref:k,className:"hidden",accept:"image/*",onChange:N,disabled:j})]}),p&&t.jsx("button",{type:"button",onClick:w,disabled:j,className:"p-2 bg-red-100 text-red-600 rounded-full hover:bg-red-200 shadow-md transition-all hover:scale-105",title:"Remover foto",children:t.jsx(h.Z,{size:18})})]})]}),t.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Clique na c\xe2mera para alterar"})]}),(0,t.jsxs)("form",{onSubmit:C,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsx("div",{className:"space-y-4",children:t.jsx(n.I,{label:"Nome ou Apelido",value:a,onChange:e=>r(e.target.value),required:!0})}),t.jsx("div",{children:t.jsx(n.I,{label:"Email",value:d,disabled:!0,className:"bg-gray-50 dark:bg-dark-800"})})]}),t.jsx(o.z,{type:"submit",isLoading:f,children:"Salvar Altera\xe7\xf5es"})]})]})}var b=r(46785),f=r(60763);let y=(0,u.Z)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var j=r(43810),v=r(31270);function k(){let{user:e}=(0,l.a)(),[a,r]=(0,s.useState)([]),[d,c]=(0,s.useState)(!1),[x,u]=(0,s.useState)(""),[m,h]=(0,s.useState)(""),[p,k]=(0,s.useState)(""),[N,w]=(0,s.useState)(""),[C,_]=(0,s.useState)(!1),P=async()=>{try{let{data:e,error:a}=await i.O.auth.mfa.listFactors();if(a)throw a;r(e.totp||[])}catch(e){console.error("Erro ao buscar fatores MFA",e)}},S=async()=>{_(!0);try{let{data:e,error:a}=await i.O.auth.mfa.enroll({factorType:"totp"});if(a)throw a;k(e.id),h(e.totp.secret);let r=await v.toDataURL(e.totp.uri);u(r),c(!0)}catch(e){g.ZP.error("Erro ao iniciar configura\xe7\xe3o 2FA: "+e.message)}finally{_(!1)}},Z=async()=>{if(!N||6!==N.length){g.ZP.error("Digite o c\xf3digo de 6 d\xedgitos.");return}_(!0);try{let{data:a,error:r}=await i.O.auth.mfa.challengeAndVerify({factorId:p,code:N});if(r)throw r;await i.O.from("userprofiles").update({twofactorenabled:!0}).eq("id",e?.id),g.ZP.success("2FA Ativado com sucesso!"),c(!1),w(""),P()}catch(e){g.ZP.error("C\xf3digo inv\xe1lido ou erro na verifica\xe7\xe3o.")}finally{_(!1)}},z=async a=>{if(confirm("Tem certeza que deseja desativar a autentica\xe7\xe3o de dois fatores?")){_(!0);try{let{error:r}=await i.O.auth.mfa.unenroll({factorId:a});if(r)throw r;await i.O.from("userprofiles").update({twofactorenabled:!1}).eq("id",e?.id),g.ZP.success("2FA Desativado."),P()}catch(e){g.ZP.error("Erro ao desativar: "+e.message)}finally{_(!1)}}};return(0,t.jsxs)("div",{className:"bg-white dark:bg-dark-900 rounded-xl shadow-sm border border-gray-100 dark:border-dark-800 p-6 md:p-8",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[t.jsx(f.Z,{size:24,className:"text-brand-600"}),"Seguran\xe7a"]}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center p-4 bg-gray-50 dark:bg-dark-800 border border-gray-200 dark:border-dark-700 rounded-xl gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:["Autentica\xe7\xe3o de Dois Fatores (2FA)",a.length>0?t.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-bold",children:"Ativado"}):t.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-0.5 rounded-full font-bold",children:"Desativado"})]}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 max-w-lg",children:"Adicione uma camada extra de seguran\xe7a exigindo um c\xf3digo do seu aplicativo autenticador."})]}),t.jsx("div",{children:a.length>0?t.jsx(o.z,{variant:"outline",className:"border-red-200 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",onClick:()=>z(a[0].id),isLoading:C,children:"Desativar 2FA"}):t.jsx(o.z,{onClick:S,isLoading:C,children:"Ativar 2FA"})})]}),t.jsx(b.u,{isOpen:d,onClose:()=>c(!1),title:"Configurar 2FA",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"mx-auto w-12 h-12 bg-brand-100 dark:bg-brand-900/30 text-brand-600 dark:text-brand-400 rounded-full flex items-center justify-center mb-4",children:t.jsx(y,{size:24})}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Escaneie o QR Code com seu app autenticador."})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-dark-800 border border-gray-200 dark:border-dark-700 rounded-lg",children:[x&&t.jsx("img",{src:x,alt:"QR Code 2FA",className:"w-40 h-40 mb-4 bg-white p-2 rounded"}),(0,t.jsxs)("div",{className:"w-full",children:[t.jsx("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400 mb-1",children:"Ou c\xf3digo manual:"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-white dark:bg-dark-900 p-2 border border-gray-200 dark:border-dark-700 rounded",children:[t.jsx("code",{className:"text-xs font-mono text-gray-800 dark:text-gray-200 flex-1 text-center select-all",children:m}),t.jsx("button",{onClick:()=>{navigator.clipboard.writeText(m),g.ZP.success("Copiado!")},className:"p-1 hover:bg-gray-100 dark:hover:bg-dark-800 rounded",children:t.jsx(j.Z,{size:14,className:"text-gray-500"})})]})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Digite o c\xf3digo de 6 d\xedgitos:"}),t.jsx(n.I,{placeholder:"000 000",value:N,onChange:e=>w(e.target.value.replace(/[^0-9]/g,"").slice(0,6)),className:"text-center text-2xl tracking-widest font-mono",autoFocus:!0})]}),t.jsx(o.z,{fullWidth:!0,onClick:Z,isLoading:C,disabled:6!==N.length,children:"Verificar e Ativar"})]})})]})}var N=r(28916),w=r(83855),C=r(92447),_=r(15188),P=r(44389),S=r(46260);function Z(){let{user:e}=(0,l.a)(),[a,r]=(0,s.useState)([]),[d,c]=(0,s.useState)(!0),[x,u]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[f,y]=(0,s.useState)(null),[j,v]=(0,s.useState)("pix"),[k,Z]=(0,s.useState)(""),[z,A]=(0,s.useState)("cpf"),[E,q]=(0,s.useState)("260"),[D,O]=(0,s.useState)(""),[I,M]=(0,s.useState)(""),[F,L]=(0,s.useState)(""),[T,U]=(0,s.useState)(""),[R,$]=(0,s.useState)(""),B=async e=>{if(confirm("Tem certeza que deseja remover este m\xe9todo de pagamento?"))try{let{error:t}=await i.O.from("payment_methods").delete().eq("id",e);if(t)throw t;g.ZP.success("Removido com sucesso."),r(a.filter(a=>a.id!==e))}catch(e){g.ZP.error("Erro ao remover: "+e.message)}},G=e=>{y(e.id),v(e.type),"pix"===e.type?(Z(e.pix_key||""),A(e.pix_key_type||"cpf")):(q(e.bank_id||"260"),O(e.agency||""),M(e.account_number||""),L(e.account_digit||""),U(e.account_holder_name||""),$(e.account_holder_document||"")),u(!0)},V=async t=>{if(t.preventDefault(),e){p(!0);try{let t={user_id:e.id,type:j,is_active:!0,...0!==a.length||f?{}:{is_primary:!0}};if("pix"===j){if(!k)throw Error("Chave Pix \xe9 obrigat\xf3ria");t.pix_key=k,t.pix_key_type=z,t.bank_id=null,t.agency=null,t.account_number=null,t.account_digit=null,t.account_holder_name=null,t.account_holder_document=null}else{if(!D||!I||!F||!T||!R)throw Error("Preencha todos os dados banc\xe1rios");t.bank_id=E,t.agency=D,t.account_number=I,t.account_digit=F,t.account_holder_name=T,t.account_holder_document=R,t.pix_key=null,t.pix_key_type=null}if(f){let{data:e,error:s}=await i.O.from("payment_methods").update({...t,updated_at:new Date().toISOString()}).eq("id",f).select().single();if(s)throw s;r(a.map(a=>a.id===f?e:a)),g.ZP.success("M\xe9todo atualizado!")}else{let{data:e,error:s}=await i.O.from("payment_methods").insert(t).select().single();if(s)throw s;r([...a,e]),g.ZP.success("M\xe9todo adicionado!")}u(!1),H(),y(null)}catch(e){g.ZP.error(e.message)}finally{p(!1)}}},H=()=>{v("pix"),Z(""),A("cpf"),q("260"),O(""),M(""),L(""),U(""),$("")},J=e=>S.kE.find(a=>a.code===e)?.name||"Banco";return(0,t.jsxs)("div",{className:"bg-white dark:bg-dark-900 rounded-xl shadow-sm border border-gray-100 dark:border-dark-800 p-6 md:p-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(N.Z,{size:24,className:"text-brand-600"}),"M\xe9todos de Pagamento"]}),(0,t.jsxs)(o.z,{size:"sm",onClick:()=>{y(null),H(),u(!0)},children:[t.jsx(w.Z,{size:16,className:"mr-1"})," Adicionar"]})]}),t.jsx("div",{className:"space-y-4",children:d?t.jsx("p",{className:"text-gray-500 text-sm",children:"Carregando..."}):0===a.length?(0,t.jsxs)("div",{className:"text-center py-6 bg-gray-50 dark:bg-dark-800 rounded-lg border border-dashed border-gray-300 dark:border-dark-600",children:[t.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Nenhum m\xe9todo cadastrado."}),t.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-xs mt-1",children:"Adicione sua Chave Pix ou conta para facilitar o recebimento."})]}):a.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-dark-800 border border-gray-200 dark:border-dark-700 rounded-xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-white dark:bg-dark-700 flex items-center justify-center shadow-sm",children:"pix"===e.type?t.jsx(C.Z,{size:20,className:"text-brand-500"}):t.jsx(_.Z,{size:20,className:"text-green-500"})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"pix"===e.type?"Chave Pix":J(e.bank_id)}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono",children:"pix"===e.type?e.pix_key:`Ag ${e.agency} Cc ${e.account_number}-${e.account_digit}`})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>G(e),className:"p-2 text-gray-400 hover:text-brand-600 hover:bg-brand-50 dark:hover:bg-brand-900/20 rounded-lg transition-colors",title:"Editar",children:t.jsx(P.Z,{size:16})}),t.jsx("button",{onClick:()=>B(e.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Excluir",children:t.jsx(h.Z,{size:16})})]})]},e.id))}),t.jsx(b.u,{isOpen:x,onClose:()=>u(!1),title:f?"Editar M\xe9todo":"Adicionar M\xe9todo",children:(0,t.jsxs)("form",{onSubmit:V,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex p-1 bg-gray-100 dark:bg-dark-700 rounded-lg mb-4",children:[t.jsx("button",{type:"button",className:`flex-1 py-2 text-sm font-medium rounded-md transition-all ${"pix"===j?"bg-white dark:bg-dark-600 shadow text-brand-600 dark:text-brand-400":"text-gray-500 dark:text-gray-400"}`,onClick:()=>v("pix"),children:"Pix"}),t.jsx("button",{type:"button",className:`flex-1 py-2 text-sm font-medium rounded-md transition-all ${"bank_account"===j?"bg-white dark:bg-dark-600 shadow text-brand-600 dark:text-brand-400":"text-gray-500 dark:text-gray-400"}`,onClick:()=>v("bank_account"),children:"Conta Banc\xe1ria"})]}),"pix"===j?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Tipo de Chave"}),(0,t.jsxs)("select",{className:"w-full rounded-lg border border-gray-300 dark:border-dark-600 bg-white dark:bg-dark-800 px-3 py-2 text-gray-900 dark:text-white",value:z,onChange:e=>A(e.target.value),children:[t.jsx("option",{value:"cpf",children:"CPF/CNPJ"}),t.jsx("option",{value:"email",children:"E-mail"}),t.jsx("option",{value:"phone",children:"Celular"}),t.jsx("option",{value:"random",children:"Chave Aleat\xf3ria"})]})]}),t.jsx(n.I,{label:"Chave Pix",placeholder:"email"===z?"exemplo@pix.com":"Informe a chave",value:k,onChange:e=>Z(e.target.value),required:!0})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Banco"}),t.jsx("select",{className:"w-full rounded-lg border border-gray-300 dark:border-dark-600 bg-white dark:bg-dark-800 px-3 py-2 text-gray-900 dark:text-white",value:E,onChange:e=>q(e.target.value),children:S.kE.map(e=>(0,t.jsxs)("option",{value:e.code,children:[e.short," - ",e.name]},e.code))})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[t.jsx(n.I,{label:"Ag\xeancia",placeholder:"0000",value:D,onChange:e=>O(e.target.value),required:!0}),t.jsx(n.I,{label:"Conta",placeholder:"000000",value:I,onChange:e=>M(e.target.value),required:!0}),t.jsx(n.I,{label:"D\xedgito",placeholder:"0",value:F,onChange:e=>L(e.target.value),required:!0})]}),t.jsx(n.I,{label:"Nome do Titular",placeholder:"Nome Completo",value:T,onChange:e=>U(e.target.value),required:!0}),t.jsx(n.I,{label:"CPF/CNPJ do Titular",placeholder:"000.000.000-00",value:R,onChange:e=>$(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[t.jsx(o.z,{type:"button",variant:"outline",onClick:()=>u(!1),children:"Cancelar"}),t.jsx(o.z,{type:"submit",isLoading:m,children:f?"Salvar Altera\xe7\xf5es":"Adicionar"})]})]})})]})}var z=r(9015),A=r(32933);function E(){let{user:e}=(0,l.a)(),[a,r]=(0,s.useState)(""),[d,c]=(0,s.useState)(""),[x,u]=(0,s.useState)(!1);if(e?.app_metadata?.provider!=="email")return null;let m=(e=>{let a=e.length>=8,r=/[A-Z]/.test(e),t=/[a-z]/.test(e),s=/\d/.test(e),d=/[@$!%*?&]/.test(e);return{minLength:a,hasUpper:r,hasLower:t,hasNumber:s,hasSpecial:d,isValid:a&&r&&t&&s&&d}})(a),h=async e=>{if(e.preventDefault(),a!==d){g.ZP.error("As senhas n\xe3o conferem.");return}if(!m.isValid){g.ZP.error("A senha n\xe3o atende aos requisitos de seguran\xe7a.");return}u(!0);try{let{error:e}=await i.O.auth.updateUser({password:a});if(e)throw e;g.ZP.success("Senha alterada com sucesso!"),r(""),c("")}catch(e){g.ZP.error("Erro ao atualizar senha: "+e.message)}finally{u(!1)}};return(0,t.jsxs)("div",{className:"bg-white dark:bg-dark-900 rounded-xl shadow-sm border border-gray-100 dark:border-dark-800 p-6 md:p-8",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[t.jsx(z.Z,{size:24,className:"text-brand-600"}),"Alterar Senha"]}),(0,t.jsxs)("form",{onSubmit:h,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx(n.I,{label:"Nova Senha",type:"password",value:a,onChange:e=>r(e.target.value),placeholder:"••••••••",required:!0}),t.jsx(n.I,{label:"Confirmar Nova Senha",type:"password",value:d,onChange:e=>c(e.target.value),placeholder:"••••••••",required:!0})]}),(0,t.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-800 p-4 rounded-lg text-sm h-fit",children:[t.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Requisitos da senha:"}),(0,t.jsxs)("ul",{className:"space-y-1.5 text-gray-500 dark:text-gray-400",children:[(0,t.jsxs)("li",{className:`flex items-center gap-2 ${m.minLength?"text-green-600 dark:text-green-400":""}`,children:[m.minLength?t.jsx(A.Z,{size:14}):t.jsx("div",{className:"w-3.5 h-3.5 rounded-full border border-gray-400"}),"M\xednimo de 8 caracteres"]}),(0,t.jsxs)("li",{className:`flex items-center gap-2 ${m.hasUpper?"text-green-600 dark:text-green-400":""}`,children:[m.hasUpper?t.jsx(A.Z,{size:14}):t.jsx("div",{className:"w-3.5 h-3.5 rounded-full border border-gray-400"}),"Uma letra mai\xfascula"]}),(0,t.jsxs)("li",{className:`flex items-center gap-2 ${m.hasLower?"text-green-600 dark:text-green-400":""}`,children:[m.hasLower?t.jsx(A.Z,{size:14}):t.jsx("div",{className:"w-3.5 h-3.5 rounded-full border border-gray-400"}),"Uma letra min\xfascula"]}),(0,t.jsxs)("li",{className:`flex items-center gap-2 ${m.hasNumber?"text-green-600 dark:text-green-400":""}`,children:[m.hasNumber?t.jsx(A.Z,{size:14}):t.jsx("div",{className:"w-3.5 h-3.5 rounded-full border border-gray-400"}),"Um n\xfamero"]}),(0,t.jsxs)("li",{className:`flex items-center gap-2 ${m.hasSpecial?"text-green-600 dark:text-green-400":""}`,children:[m.hasSpecial?t.jsx(A.Z,{size:14}):t.jsx("div",{className:"w-3.5 h-3.5 rounded-full border border-gray-400"}),"Um caractere especial (@$!%*?&)"]})]})]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx(o.z,{type:"submit",isLoading:x,disabled:!m.isValid||!a||a!==d,children:"Atualizar Senha"})})]})]})}var q=r(37202),D=r(71810);let O=(0,u.Z)("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);var I=r(35047);function M(){let{user:e,signOut:a}=(0,l.a)(),r=(0,I.useRouter)(),[d,i]=(0,s.useState)(!1),[c,x]=(0,s.useState)(null),[u,m]=(0,s.useState)(1),[p,f]=(0,s.useState)(""),[y,j]=(0,s.useState)(!1),v=e=>{x(e),m(1),f(""),i(!0)},k=async()=>{if(c&&e){if(1===u){m(2);return}j(!0);try{if("leave_groups"===c){if(!(await fetch("/api/account/leave-all",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.id})})).ok)throw Error("Erro ao sair dos grupos.");g.ZP.success("Voc\xea saiu de todos os grupos e excluiu os seus."),i(!1),r.push("/dashboard")}else if("delete_account"===c){if("DELETAR"!==p){g.ZP.error("Digite DELETAR para confirmar."),j(!1);return}if(!(await fetch("/api/account/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.id})})).ok)throw Error("Erro ao excluir conta.");await a(),g.ZP.success("Conta exclu\xedda."),r.push("/")}}catch(e){g.ZP.error("Erro: "+e.message),i(!1)}finally{j(!1)}}};return(0,t.jsxs)("div",{className:"bg-white dark:bg-dark-900 rounded-xl shadow-sm border border-red-200 dark:border-red-900/50 p-6 md:p-8",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold text-red-600 dark:text-red-500 mb-6 flex items-center gap-2",children:[t.jsx(q.Z,{size:24}),"Zona de Perigo"]}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-sm",children:"Estas a\xe7\xf5es s\xe3o destrutivas e n\xe3o podem ser desfeitas."}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 bg-red-50 dark:bg-red-900/10 rounded-lg border border-red-100 dark:border-red-900/30 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Sair de todos os grupos"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Voc\xea sair\xe1 de grupos onde \xe9 membro e ",t.jsx("span",{className:"font-bold",children:"excluir\xe1"})," grupos que voc\xea criou."]})]}),(0,t.jsxs)(o.z,{variant:"outline",className:"text-red-600 dark:text-red-400 border-red-200 dark:border-red-800 hover:bg-red-100 dark:hover:bg-red-900/20 whitespace-nowrap",onClick:()=>v("leave_groups"),children:[t.jsx(D.Z,{size:16,className:"mr-2"}),"Sair de todos"]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 bg-red-50 dark:bg-red-900/10 rounded-lg border border-red-100 dark:border-red-900/30 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Excluir Conta"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Exclui permanentemente sua conta e todos os seus dados."})]}),(0,t.jsxs)(o.z,{variant:"danger",className:"whitespace-nowrap",onClick:()=>v("delete_account"),children:[t.jsx(h.Z,{size:16,className:"mr-2"}),"Excluir Conta"]})]})]}),t.jsx(b.u,{isOpen:d,onClose:()=>i(!1),title:"Confirma\xe7\xe3o de Seguran\xe7a",children:(0,t.jsxs)("div",{className:"space-y-4",children:[1===u&&(0,t.jsxs)("div",{className:"text-center",children:[t.jsx(O,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Tem certeza absoluta?"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"leave_groups"===c?"Esta a\xe7\xe3o remover\xe1 voc\xea de todos os grupos e excluir\xe1 permanentemente os grupos que voc\xea criou.":"Esta a\xe7\xe3o excluir\xe1 sua conta, perfil, grupos criados e hist\xf3rico de pagamentos permanentemente."}),(0,t.jsxs)("div",{className:"flex gap-3 justify-center",children:[t.jsx(o.z,{variant:"outline",onClick:()=>i(!1),children:"Cancelar"}),t.jsx(o.z,{variant:"danger",onClick:k,children:"Continuar"})]})]}),2===u&&(0,t.jsxs)("div",{className:"text-center animate-fade-in-down",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center mx-auto mb-4",children:t.jsx(q.Z,{className:"text-red-600",size:24})}),t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"delete_account"===c?"\xdaltima confirma\xe7\xe3o":"Confirmar Sa\xedda"}),"delete_account"===c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mb-4 text-sm",children:["Para confirmar, digite ",t.jsx("span",{className:"font-mono font-bold select-all",children:"DELETAR"})," no campo abaixo."]}),t.jsx(n.I,{value:p,onChange:e=>f(e.target.value),placeholder:"DELETAR",className:"mb-6 text-center uppercase"})]}):t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-sm",children:"Clique em confirmar para limpar seus grupos. N\xe3o h\xe1 como desfazer."}),(0,t.jsxs)("div",{className:"flex gap-3 justify-center",children:[t.jsx(o.z,{variant:"outline",onClick:()=>i(!1),disabled:y,children:"Cancelar"}),t.jsx(o.z,{variant:"danger",onClick:k,isLoading:y,disabled:"delete_account"===c&&"DELETAR"!==p,children:"delete_account"===c?"Excluir Definitivamente":"Confirmar"})]})]})]})})]})}function F(){return(0,t.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8 pb-12 animate-fade-in-up",children:[(0,t.jsxs)("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Meu Perfil"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Gerencie suas informa\xe7\xf5es pessoais e prefer\xeancias."})]}),t.jsx(p,{}),t.jsx(Z,{}),t.jsx(E,{}),t.jsx(k,{}),t.jsx(M,{})]})}function L(){return t.jsx(d.i,{children:t.jsx(F,{})})}},46260:(e,a,r)=>{"use strict";r.d(a,{kE:()=>t});let t=[{code:"001",name:"Banco do Brasil",short:"BB"},{code:"237",name:"Bradesco",short:"Bradesco"},{code:"341",name:"Ita\xfa Unibanco",short:"Ita\xfa"},{code:"104",name:"Caixa Econ\xf4mica",short:"Caixa"},{code:"033",name:"Santander",short:"Santander"},{code:"260",name:"Nubank",short:"Nubank"},{code:"077",name:"Inter",short:"Inter"},{code:"336",name:"C6 Bank",short:"C6"},{code:"290",name:"PagBank",short:"PagBank"},{code:"380",name:"PicPay",short:"PicPay"},{code:"212",name:"Banco Original",short:"Original"},{code:"655",name:"Banco Neon",short:"Neon"},{code:"403",name:"Cora",short:"Cora"}]},37202:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(76557).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},32933:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(76557).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},75290:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(76557).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},44591:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>t});let t=(0,r(68570).createProxy)(String.raw`C:\Users\bruno\Documents\GitHub\Divvy\app\profile\page.tsx#default`)}};var a=require("../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),t=a.X(0,[9276,7343,4118,690,4562],()=>r(11578));module.exports=t})();