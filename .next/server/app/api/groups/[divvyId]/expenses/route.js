"use strict";(()=>{var e={};e.id=7434,e.ids=[7434],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},68515:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>v,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>x,staticGenerationAsyncStorage:()=>g});var s={};r.r(s),r.d(s,{GET:()=>d,POST:()=>p});var n=r(49303),i=r(88716),o=r(60670),a=r(87070),u=r(19692);async function p(e,{params:t}){let r=(0,u.$)(),s=t.divvyId,{data:{session:n}}=await r.auth.getSession();if(!n?.user)return a.NextResponse.json({error:"Unauthorized"},{status:401});let i=await e.json(),o=String(i?.paidByUserId??"").trim(),p=Number(i?.amount),d=String(i?.category??"").trim(),c=String(i?.description??"").trim(),l=String(i?.date??"").trim(),g=String(i?.receiptPhotoUrl??"").trim()||null,x=i?.categoryId?String(i.categoryId).trim():null;if(!o||!Number.isFinite(p)||!d||!c||!l)return a.NextResponse.json({error:"Dados incompletos para criar despesa."},{status:400});let{data:m,error:v}=await r.from("expenses").insert({divvyid:s,paidbyuserid:o,amount:p,category:d,description:c,date:l,receiptphotourl:g,categoryid:x||null,locked:!1}).select("*").single();return v?a.NextResponse.json({error:v.message},{status:500}):a.NextResponse.json({expense:m},{status:201})}async function d(e,{params:t}){let r=(0,u.$)(),s=t.divvyId,{data:{session:n}}=await r.auth.getSession();if(!n?.user)return a.NextResponse.json({error:"Unauthorized"},{status:401});let{data:i,error:o}=await r.from("expenses").select(`
      id, title, description, amount_cents, currency, expense_date,
      payeruserid, createdby, createdat,
      categoryid,
      category:expense_categories(id, name, slug, color)
    `).eq("divvyid",s).order("expense_date",{ascending:!1}).order("createdat",{ascending:!1});return o?a.NextResponse.json({error:o.message},{status:500}):a.NextResponse.json({expenses:i??[]})}let c=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/groups/[divvyId]/expenses/route",pathname:"/api/groups/[divvyId]/expenses",filename:"route",bundlePath:"app/api/groups/[divvyId]/expenses/route"},resolvedPagePath:"C:\\Users\\bruno\\Documents\\GitHub\\Divvy\\app\\api\\groups\\[divvyId]\\expenses\\route.ts",nextConfigOutput:"export",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:g,serverHooks:x}=c,m="/api/groups/[divvyId]/expenses/route";function v(){return(0,o.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:g})}},19692:(e,t,r)=>{r.d(t,{$:()=>i});var s=r(71615),n=r(20344);function i(){return(0,n.createServerClient)("https://jpgifiumxqzbroejhudc.supabase.co","sb_publishable_RWrlgQRxQHCQ45cEIia_ug_OT9ouCwi",{cookies:{get:e=>s.cookies().get(e)?.value,set(e,t,r){(0,s.cookies)().set(e,t,r)},remove(e,t){(0,s.cookies)().set(e,"",{...t,maxAge:0})}}})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,5972,7857,958],()=>r(68515));module.exports=s})();