"use strict";(()=>{var e={};e.id=888,e.ids=[888],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},61212:e=>{e.exports=require("async_hooks")},84770:e=>{e.exports=require("crypto")},76162:e=>{e.exports=require("stream")},21764:e=>{e.exports=require("util")},84492:e=>{e.exports=require("node:stream")},23831:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>h,patchFetch:()=>S,requestAsyncStorage:()=>v,routeModule:()=>m,serverHooks:()=>E,staticGenerationAsyncStorage:()=>l});var o={};t.r(o),t.d(o,{POST:()=>d});var s=t(49303),n=t(88716),p=t(60670),a=t(87070),i=t(30474);let u=new(t(46495)).R(process.env.RESEND_API_KEY),c=process.env.SUPPORT_EMAIL||"falecomdivvy@gmail.com";async function d(e){try{let{name:r,email:t,subject:o,message:s}=await e.json();if(!t||!o||!s)return a.NextResponse.json({error:"Campos obrigat\xf3rios faltando."},{status:400});let n=(0,i.f)(),{error:p}=await n.from("supporttickets").insert({name:r,email:t,subject:o,message:s,createdat:new Date().toISOString()});if(p)throw p;return process.env.RESEND_API_KEY&&await u.emails.send({from:"Divvy Support <onboarding@resend.dev>",to:c,subject:`[Suporte] ${o}`,html:`
          <h1>Novo Ticket de Suporte</h1>
          <p><strong>De:</strong> ${r||"An\xf4nimo"} (${t})</p>
          <p><strong>Assunto:</strong> ${o}</p>
          <hr />
          <p>${s.replace(/\n/g,"<br>")}</p>
        `}),a.NextResponse.json({success:!0},{status:200})}catch(e){return console.error("Support API Error:",e),a.NextResponse.json({error:"Erro ao enviar mensagem. Tente novamente mais tarde."},{status:500})}}let m=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/support/route",pathname:"/api/support",filename:"route",bundlePath:"app/api/support/route"},resolvedPagePath:"C:\\Users\\bruno\\Documents\\GitHub\\Divvy\\app\\api\\support\\route.ts",nextConfigOutput:"export",userland:o}),{requestAsyncStorage:v,staticGenerationAsyncStorage:l,serverHooks:E}=m,h="/api/support/route";function S(){return(0,p.patchFetch)({serverHooks:E,staticGenerationAsyncStorage:l})}},30474:(e,r,t)=>{t.d(r,{f:()=>p});var o=t(37857);let s="https://jpgifiumxqzbroejhudc.supabase.co",n=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!s)throw Error("Missing env NEXT_PUBLIC_SUPABASE_URL");if(!n)throw Error("Missing env SUPABASE_SERVICE_ROLE_KEY");let p=()=>(0,o.eI)(s,n,{auth:{autoRefreshToken:!1,persistSession:!1}})}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[9276,5972,7857,6495],()=>t(23831));module.exports=o})();